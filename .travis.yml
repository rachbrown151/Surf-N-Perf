language: node_js
node_js:
  - "0.10"
env:
  global:
  - GH_REF https://github.com/rachbrown151/Surf-N-Perf.git
  - secure: 554540062d6e04e9100d1989c0e1def530023622
branches:
  only:
  - master
  - documentation
before_install: npm install -g grunt-cli
install: 
  - npm install
  - npm install travis-encrypt -g
  - travis-encrypt -r https://github.com/rachbrown151/Surf-N-Perf.git -k GH_TOKEN -v 554540062d6e04e9100d1989c0e1def530023622
after_success:
  - git remote set-url origin https://github.com/rachbrown151/Surf-N-Perf.git
  - git config --global user.email "rabrown@seas.upenn.edu"
  - git config --global user.name "Rachel Brown"
  - grunt jsdoc
  - git add -A
  - git status
  - git stash
  - git checkout -b gh-pages
  - ls
  - rm -r *
  - ls
  - git stash apply
  - ls
  - cp -r gh-pages/* .
  - rm -r gh-pages/
  - rm index.html
  - mv SurfNPerf.html index.html
  - git add -A
  - git commit -m "Automated documentation update"
  - git push origin gh-pages
  - git checkout master
  - git branch -d gh-pages
