language: node_js
node_js:
  - "0.10"
env:
  global:
  - GH_REF https://github.com/rachbrown151/Surf-N-Perf.git
  - secure: 026629c44d1035eb2d60c9a9215e7ae9a622dda6
branches:
  only:
  - master
  - documentation
before_install: npm install -g grunt-cli
install: 
  - npm install
  - npm install travis-encrypt -g
  - travis-encrypt -r https://github.com/rachbrown151/Surf-N-Perf.git -k GH_TOKEN -v 026629c44d1035eb2d60c9a9215e7ae9a622dda6
after_success:
  - git remote set-url origin https://github.com/rachbrown151/Surf-N-Perf.git
  - git config --global user.email "shayanp@seas.upenn.edu"
  - git config --global user.name "Shayan Patel"
  - grunt jsdoc
  - git add -A
  - git status
  - git stash
  - git checkout -b gh-pages
  - ls
  - rm -r *
  - ls
  - git stash apply
  - ls
  - cp -r gh-pages/* .
  - rm -r gh-pages/
  - rm index.html
  - mv SurfNPerf.html index.html
  - git add -A
  - git commit -m "Automated documentation update"
  - git push origin gh-pages
  - git checkout master
  - git branch -d gh-pages
